import{r as Qe}from"../chunks/index.ade5cbd2.js";import{s as re,f as Ve,d as V,e as ae,n as ge,i as Ze,r as pe,j as Be}from"../chunks/utils.50d53bae.js";import{e as P,i as O,r as M,d as y,B as xe,b as B,f as D,g as L,h as g,q as E,C as he,u as De,p as Le,s as F,c as w,H as ke,x as ve,k as R,l as q,D as Ne,E as Oe,m as K,v as $e,y as et,z as Ie,F as tt}from"../chunks/scheduler.9c47e382.js";import{S as ye,i as Te,a as N,g as Q,t as S,c as Z,f as X,b as G,d as le,m as W,e as J}from"../chunks/index.2a1b9d3c.js";import{e as Se}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.81dfeb6a.js";import{i as lt}from"../chunks/navigation.96bc44bb.js";import{g as oe,a as _e,I as nt}from"../chunks/IconBase.6595628f.js";import{w as at}from"../chunks/index.b0b39f05.js";import{f as ie,a as He}from"../chunks/index.95a1dcea.js";import{L as ot}from"../chunks/Loading.ec51317a.js";function it(){const{subscribe:l,set:e,update:t}=at([]);return{subscribe:l,set:e,update:t,trigger:a=>t(o=>(o.push(a),o)),close:()=>t(a=>(a.length>0&&a.shift(),a)),clear:()=>e([])}}const U=it();function rt(l,e){const t='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let a,o;function n(r){r.shiftKey&&r.code==="Tab"&&(r.preventDefault(),o.focus())}function i(r){!r.shiftKey&&r.code==="Tab"&&(r.preventDefault(),a.focus())}const c=r=>{if(e===!1)return;const m=Array.from(l.querySelectorAll(t));m.length&&(a=m[0],o=m[m.length-1],r||a.focus(),a.addEventListener("keydown",n),o.addEventListener("keydown",i))};c(!1);function s(){a&&a.removeEventListener("keydown",n),o&&o.removeEventListener("keydown",i)}const f=(r,m)=>(r.length&&(s(),c(!0)),m),h=new MutationObserver(f);return h.observe(l,{childList:!0,subtree:!0}),{update(r){e=r,r?c(!1):s()},destroy(){s(),h.disconnect()}}}function Me(l){let e=l[12],t,a,o=ze(l);return{c(){o.c(),t=P()},l(n){o.l(n),t=P()},m(n,i){o.m(n,i),O(n,t,i),a=!0},p(n,i){i[0]&4096&&re(e,e=n[12])?(Q(),S(o,1,1,ge),Z(),o=ze(n),o.c(),N(o,1),o.m(t.parentNode,t)):o.p(n,i)},i(n){a||(N(o),a=!0)},o(n){S(o),a=!1},d(n){n&&y(t),o.d(n)}}}function st(l){var f,h;let e,t,a,o,n;const i=[(f=l[14])==null?void 0:f.props,{parent:l[15]}];var c=(h=l[14])==null?void 0:h.ref;function s(r,m){var k;let p={$$slots:{default:[ut]},$$scope:{ctx:r}};if(m!==void 0&&m[0]&49152)p=oe(i,[m[0]&16384&&_e((k=r[14])==null?void 0:k.props),m[0]&32768&&{parent:r[15]}]);else for(let d=0;d<i.length;d+=1)p=V(p,i[d]);return{props:p}}return c&&(t=Le(c,s(l))),{c(){e=B("div"),t&&G(t.$$.fragment),this.h()},l(r){e=D(r,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var m=L(e);t&&le(t.$$.fragment,m),m.forEach(y),this.h()},h(){var r;g(e,"class",a="modal contents "+(((r=l[12][0])==null?void 0:r.modalClasses)??"")),g(e,"data-testid","modal-component"),g(e,"role","dialog"),g(e,"aria-modal","true"),g(e,"aria-label",o=l[12][0].title??"")},m(r,m){O(r,e,m),t&&W(t,e,null),n=!0},p(r,m){var p,k,d;if(m[0]&16384&&c!==(c=(p=r[14])==null?void 0:p.ref)){if(t){Q();const C=t;S(C.$$.fragment,1,0,()=>{J(C,1)}),Z()}c?(t=Le(c,s(r,m)),G(t.$$.fragment),N(t.$$.fragment,1),W(t,e,null)):t=null}else if(c){const C=m[0]&49152?oe(i,[m[0]&16384&&_e((k=r[14])==null?void 0:k.props),m[0]&32768&&{parent:r[15]}]):{};m[0]&16384|m[1]&8192&&(C.$$scope={dirty:m,ctx:r}),t.$set(C)}(!n||m[0]&4096&&a!==(a="modal contents "+(((d=r[12][0])==null?void 0:d.modalClasses)??"")))&&g(e,"class",a),(!n||m[0]&4096&&o!==(o=r[12][0].title??""))&&g(e,"aria-label",o)},i(r){n||(t&&N(t.$$.fragment,r),n=!0)},o(r){t&&S(t.$$.fragment,r),n=!1},d(r){r&&y(e),t&&J(t)}}}function ft(l){var d,C,b,T;let e,t,a,o,n,i,c,s,f=((d=l[12][0])==null?void 0:d.title)&&we(l),h=((C=l[12][0])==null?void 0:C.body)&&Pe(l),r=((b=l[12][0])==null?void 0:b.image)&&typeof((T=l[12][0])==null?void 0:T.image)=="string"&&Ae(l);function m(_,v){if(_[12][0].type==="alert")return mt;if(_[12][0].type==="confirm")return dt;if(_[12][0].type==="prompt")return ct}let p=m(l),k=p&&p(l);return{c(){e=B("div"),f&&f.c(),t=F(),h&&h.c(),a=F(),r&&r.c(),o=F(),k&&k.c(),this.h()},l(_){e=D(_,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var v=L(e);f&&f.l(v),t=w(v),h&&h.l(v),a=w(v),r&&r.l(v),o=w(v),k&&k.l(v),v.forEach(y),this.h()},h(){g(e,"class",n="modal "+l[16]),g(e,"data-testid","modal"),g(e,"role","dialog"),g(e,"aria-modal","true"),g(e,"aria-label",i=l[12][0].title??"")},m(_,v){O(_,e,v),f&&f.m(e,null),E(e,t),h&&h.m(e,null),E(e,a),r&&r.m(e,null),E(e,o),k&&k.m(e,null),s=!0},p(_,v){var I,H,A,z;l=_,(I=l[12][0])!=null&&I.title?f?f.p(l,v):(f=we(l),f.c(),f.m(e,t)):f&&(f.d(1),f=null),(H=l[12][0])!=null&&H.body?h?h.p(l,v):(h=Pe(l),h.c(),h.m(e,a)):h&&(h.d(1),h=null),(A=l[12][0])!=null&&A.image&&typeof((z=l[12][0])==null?void 0:z.image)=="string"?r?r.p(l,v):(r=Ae(l),r.c(),r.m(e,o)):r&&(r.d(1),r=null),p===(p=m(l))&&k?k.p(l,v):(k&&k.d(1),k=p&&p(l),k&&(k.c(),k.m(e,null))),(!s||v[0]&65536&&n!==(n="modal "+l[16]))&&g(e,"class",n),(!s||v[0]&4096&&i!==(i=l[12][0].title??""))&&g(e,"aria-label",i)},i(_){s||(_&&he(()=>{s&&(c||(c=X(e,ie,{duration:l[3],opacity:0,y:100},!0)),c.run(1))}),s=!0)},o(_){_&&(c||(c=X(e,ie,{duration:l[3],opacity:0,y:100},!1)),c.run(0)),s=!1},d(_){_&&y(e),f&&f.d(),h&&h.d(),r&&r.d(),k&&k.d(),_&&c&&c.end()}}}function Fe(l){var o;let e,t=((o=l[14])==null?void 0:o.slot)+"",a;return{c(){e=new ke(!1),a=P(),this.h()},l(n){e=ve(n,!1),a=P(),this.h()},h(){e.a=a},m(n,i){e.m(t,n,i),O(n,a,i)},p(n,i){var c;i[0]&16384&&t!==(t=((c=n[14])==null?void 0:c.slot)+"")&&e.p(t)},d(n){n&&(y(a),e.d())}}}function ut(l){var a;let e,t=((a=l[14])==null?void 0:a.slot)&&Fe(l);return{c(){t&&t.c(),e=P()},l(o){t&&t.l(o),e=P()},m(o,n){t&&t.m(o,n),O(o,e,n)},p(o,n){var i;(i=o[14])!=null&&i.slot?t?t.p(o,n):(t=Fe(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){o&&y(e),t&&t.d(o)}}}function we(l){let e,t,a=l[12][0].title+"",o;return{c(){e=B("header"),t=new ke(!1),this.h()},l(n){e=D(n,"HEADER",{class:!0});var i=L(e);t=ve(i,!1),i.forEach(y),this.h()},h(){t.a=null,g(e,"class",o="modal-header "+l[9])},m(n,i){O(n,e,i),t.m(a,e)},p(n,i){i[0]&4096&&a!==(a=n[12][0].title+"")&&t.p(a),i[0]&512&&o!==(o="modal-header "+n[9])&&g(e,"class",o)},d(n){n&&y(e)}}}function Pe(l){let e,t,a=l[12][0].body+"",o;return{c(){e=B("article"),t=new ke(!1),this.h()},l(n){e=D(n,"ARTICLE",{class:!0});var i=L(e);t=ve(i,!1),i.forEach(y),this.h()},h(){t.a=null,g(e,"class",o="modal-body "+l[10])},m(n,i){O(n,e,i),t.m(a,e)},p(n,i){i[0]&4096&&a!==(a=n[12][0].body+"")&&t.p(a),i[0]&1024&&o!==(o="modal-body "+n[10])&&g(e,"class",o)},d(n){n&&y(e)}}}function Ae(l){let e,t;return{c(){e=B("img"),this.h()},l(a){e=D(a,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var a;g(e,"class","modal-image "+pt),Be(e.src,t=(a=l[12][0])==null?void 0:a.image)||g(e,"src",t),g(e,"alt","Modal")},m(a,o){O(a,e,o)},p(a,o){var n;o[0]&4096&&!Be(e.src,t=(n=a[12][0])==null?void 0:n.image)&&g(e,"src",t)},d(a){a&&y(e)}}}function ct(l){let e,t,a,o,n,i,c,s,f,h,r,m,p,k,d=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},l[12][0].valueAttr],C={};for(let b=0;b<d.length;b+=1)C=V(C,d[b]);return{c(){e=B("form"),t=B("input"),a=F(),o=B("footer"),n=B("button"),i=R(l[0]),s=F(),f=B("button"),h=R(l[2]),this.h()},l(b){e=D(b,"FORM",{class:!0});var T=L(e);t=D(T,"INPUT",{class:!0,name:!0,type:!0}),a=w(T),o=D(T,"FOOTER",{class:!0});var _=L(o);n=D(_,"BUTTON",{type:!0,class:!0});var v=L(n);i=q(v,l[0]),v.forEach(y),s=w(_),f=D(_,"BUTTON",{type:!0,class:!0});var I=L(f);h=q(I,l[2]),I.forEach(y),_.forEach(y),T.forEach(y),this.h()},h(){Ne(t,C),g(n,"type","button"),g(n,"class",c="btn "+l[7]),g(f,"type","submit"),g(f,"class",r="btn "+l[8]),g(o,"class",m="modal-footer "+l[11]),g(e,"class","space-y-4")},m(b,T){O(b,e,T),E(e,t),t.autofocus&&t.focus(),Oe(t,l[13]),E(e,a),E(e,o),E(o,n),E(n,i),E(o,s),E(o,f),E(f,h),p||(k=[M(t,"input",l[39]),M(n,"click",l[21]),M(e,"submit",l[23])],p=!0)},p(b,T){Ne(t,C=oe(d,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},T[0]&4096&&b[12][0].valueAttr])),T[0]&8192&&t.value!==b[13]&&Oe(t,b[13]),T[0]&1&&K(i,b[0]),T[0]&128&&c!==(c="btn "+b[7])&&g(n,"class",c),T[0]&4&&K(h,b[2]),T[0]&256&&r!==(r="btn "+b[8])&&g(f,"class",r),T[0]&2048&&m!==(m="modal-footer "+b[11])&&g(o,"class",m)},d(b){b&&y(e),p=!1,pe(k)}}}function dt(l){let e,t,a,o,n,i,c,s,f,h,r;return{c(){e=B("footer"),t=B("button"),a=R(l[0]),n=F(),i=B("button"),c=R(l[1]),this.h()},l(m){e=D(m,"FOOTER",{class:!0});var p=L(e);t=D(p,"BUTTON",{type:!0,class:!0});var k=L(t);a=q(k,l[0]),k.forEach(y),n=w(p),i=D(p,"BUTTON",{type:!0,class:!0});var d=L(i);c=q(d,l[1]),d.forEach(y),p.forEach(y),this.h()},h(){g(t,"type","button"),g(t,"class",o="btn "+l[7]),g(i,"type","button"),g(i,"class",s="btn "+l[8]),g(e,"class",f="modal-footer "+l[11])},m(m,p){O(m,e,p),E(e,t),E(t,a),E(e,n),E(e,i),E(i,c),h||(r=[M(t,"click",l[21]),M(i,"click",l[22])],h=!0)},p(m,p){p[0]&1&&K(a,m[0]),p[0]&128&&o!==(o="btn "+m[7])&&g(t,"class",o),p[0]&2&&K(c,m[1]),p[0]&256&&s!==(s="btn "+m[8])&&g(i,"class",s),p[0]&2048&&f!==(f="modal-footer "+m[11])&&g(e,"class",f)},d(m){m&&y(e),h=!1,pe(r)}}}function mt(l){let e,t,a,o,n,i,c;return{c(){e=B("footer"),t=B("button"),a=R(l[0]),this.h()},l(s){e=D(s,"FOOTER",{class:!0});var f=L(e);t=D(f,"BUTTON",{type:!0,class:!0});var h=L(t);a=q(h,l[0]),h.forEach(y),f.forEach(y),this.h()},h(){g(t,"type","button"),g(t,"class",o="btn "+l[7]),g(e,"class",n="modal-footer "+l[11])},m(s,f){O(s,e,f),E(e,t),E(t,a),i||(c=M(t,"click",l[21]),i=!0)},p(s,f){f[0]&1&&K(a,s[0]),f[0]&128&&o!==(o="btn "+s[7])&&g(t,"class",o),f[0]&2048&&n!==(n="modal-footer "+s[11])&&g(e,"class",n)},d(s){s&&y(e),i=!1,c()}}}function ze(l){let e,t,a,o,n,i,c,s,f,h,r;const m=[ft,st],p=[];function k(d,C){return d[12][0].type!=="component"?0:1}return a=k(l),o=p[a]=m[a](l),{c(){e=B("div"),t=B("div"),o.c(),this.h()},l(d){e=D(d,"DIV",{class:!0,"data-testid":!0});var C=L(e);t=D(C,"DIV",{class:!0});var b=L(t);o.l(b),b.forEach(y),C.forEach(y),this.h()},h(){g(t,"class",n="modal-transition "+l[17]),g(e,"class",c="modal-backdrop "+l[18]),g(e,"data-testid","modal-backdrop")},m(d,C){O(d,e,C),E(e,t),p[a].m(t,null),f=!0,h||(r=[M(e,"mousedown",l[19]),M(e,"mouseup",l[20]),M(e,"touchstart",l[37]),M(e,"touchend",l[38]),Ze(rt.call(null,e,!0))],h=!0)},p(d,C){l=d;let b=a;a=k(l),a===b?p[a].p(l,C):(Q(),S(p[b],1,1,()=>{p[b]=null}),Z(),o=p[a],o?o.p(l,C):(o=p[a]=m[a](l),o.c()),N(o,1),o.m(t,null)),(!f||C[0]&131072&&n!==(n="modal-transition "+l[17]))&&g(t,"class",n),(!f||C[0]&262144&&c!==(c="modal-backdrop "+l[18]))&&g(e,"class",c)},i(d){f||(N(o),d&&he(()=>{f&&(i||(i=X(t,ie,{duration:l[3],opacity:l[4],x:l[5],y:l[6]},!0)),i.run(1))}),d&&he(()=>{f&&(s||(s=X(e,He,{duration:l[3]},!0)),s.run(1))}),f=!0)},o(d){S(o),d&&(i||(i=X(t,ie,{duration:l[3],opacity:l[4],x:l[5],y:l[6]},!1)),i.run(0)),d&&(s||(s=X(e,He,{duration:l[3]},!1)),s.run(0)),f=!1},d(d){d&&y(e),p[a].d(),d&&i&&i.end(),d&&s&&s.end(),h=!1,pe(r)}}}function ht(l){let e,t,a,o,n=l[12].length>0&&Me(l);return{c(){n&&n.c(),e=P()},l(i){n&&n.l(i),e=P()},m(i,c){n&&n.m(i,c),O(i,e,c),t=!0,a||(o=M(window,"keydown",l[24]),a=!0)},p(i,c){i[12].length>0?n?(n.p(i,c),c[0]&4096&&N(n,1)):(n=Me(i),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Q(),S(n,1,1,()=>{n=null}),Z())},i(i){t||(N(n),t=!0)},o(i){S(n),t=!1},d(i){i&&y(e),n&&n.d(i),a=!1,o()}}}const _t="fixed top-0 left-0 right-0 bottom-0",bt="w-full h-full p-4 overflow-y-auto flex justify-center",gt="block",pt="w-full h-auto";function kt(l,e,t){let a,o,n,i,c,s;Ve(l,U,u=>t(12,s=u));const f=xe();let{position:h="items-center"}=e,{components:r={}}=e,{duration:m=150}=e,{flyOpacity:p=0}=e,{flyX:k=0}=e,{flyY:d=100}=e,{background:C="bg-surface-100-800-token"}=e,{width:b="w-modal"}=e,{height:T="h-auto"}=e,{padding:_="p-4"}=e,{spacing:v="space-y-4"}=e,{rounded:I="rounded-container-token"}=e,{shadow:H="shadow-xl"}=e,{zIndex:A="z-[999]"}=e,{buttonNeutral:z="variant-ghost-surface"}=e,{buttonPositive:Y="variant-filled"}=e,{buttonTextCancel:x="Cancel"}=e,{buttonTextConfirm:$="Confirm"}=e,{buttonTextSubmit:ee="Submit"}=e,{regionBackdrop:ne="bg-surface-backdrop-token"}=e,{regionHeader:se="text-2xl font-bold"}=e,{regionBody:fe="max-h-[200px] overflow-hidden"}=e,{regionFooter:ue="flex justify-end space-x-2"}=e,te;const ce={buttonTextCancel:x,buttonTextConfirm:$,buttonTextSubmit:ee};let Ee,de=!1;U.subscribe(u=>{u.length&&(u[0].type==="prompt"&&t(13,te=u[0].value),t(0,x=u[0].buttonTextCancel||ce.buttonTextCancel),t(1,$=u[0].buttonTextConfirm||ce.buttonTextConfirm),t(2,ee=u[0].buttonTextSubmit||ce.buttonTextSubmit),t(14,Ee=typeof u[0].component=="string"?r[u[0].component]:u[0].component))});function Re(u){if(!(u.target instanceof Element))return;const j=u.target.classList;(j.contains("modal-backdrop")||j.contains("modal-transition"))&&(de=!0)}function qe(u){if(!(u.target instanceof Element))return;const j=u.target.classList;(j.contains("modal-backdrop")||j.contains("modal-transition"))&&de&&(s[0].response&&s[0].response(void 0),U.close(),f("backdrop",u)),de=!1}function me(){s[0].response&&s[0].response(!1),U.close()}function Ke(){s[0].response&&s[0].response(!0),U.close()}function Ye(u){u.preventDefault(),s[0].response&&s[0].response(te),U.close()}function Xe(u){s.length&&u.code==="Escape"&&me()}function Ge(u){De.call(this,l,u)}function We(u){De.call(this,l,u)}function Je(){te=this.value,t(13,te)}return l.$$set=u=>{t(43,e=V(V({},e),ae(u))),"position"in u&&t(25,h=u.position),"components"in u&&t(26,r=u.components),"duration"in u&&t(3,m=u.duration),"flyOpacity"in u&&t(4,p=u.flyOpacity),"flyX"in u&&t(5,k=u.flyX),"flyY"in u&&t(6,d=u.flyY),"background"in u&&t(27,C=u.background),"width"in u&&t(28,b=u.width),"height"in u&&t(29,T=u.height),"padding"in u&&t(30,_=u.padding),"spacing"in u&&t(31,v=u.spacing),"rounded"in u&&t(32,I=u.rounded),"shadow"in u&&t(33,H=u.shadow),"zIndex"in u&&t(34,A=u.zIndex),"buttonNeutral"in u&&t(7,z=u.buttonNeutral),"buttonPositive"in u&&t(8,Y=u.buttonPositive),"buttonTextCancel"in u&&t(0,x=u.buttonTextCancel),"buttonTextConfirm"in u&&t(1,$=u.buttonTextConfirm),"buttonTextSubmit"in u&&t(2,ee=u.buttonTextSubmit),"regionBackdrop"in u&&t(35,ne=u.regionBackdrop),"regionHeader"in u&&t(9,se=u.regionHeader),"regionBody"in u&&t(10,fe=u.regionBody),"regionFooter"in u&&t(11,ue=u.regionFooter)},l.$$.update=()=>{var u,j,Ce;l.$$.dirty[0]&33558528&&t(36,a=((u=s[0])==null?void 0:u.position)??h),t(18,o=`${_t} ${ne} ${A} ${e.class??""} ${((j=s[0])==null?void 0:j.backdropClasses)??""}`),l.$$.dirty[1]&32&&t(17,n=`${bt} ${a??""}`),l.$$.dirty[0]&2013270016|l.$$.dirty[1]&7&&t(16,i=`${gt} ${C} ${b} ${T} ${_} ${v} ${I} ${H} ${((Ce=s[0])==null?void 0:Ce.modalClasses)??""}`),l.$$.dirty[0]&2046824447|l.$$.dirty[1]&23&&t(15,c={position:h,duration:m,flyOpacity:p,flyX:k,flyY:d,background:C,width:b,height:T,padding:_,spacing:v,rounded:I,shadow:H,buttonNeutral:z,buttonPositive:Y,buttonTextCancel:x,buttonTextConfirm:$,buttonTextSubmit:ee,regionBackdrop:ne,regionHeader:se,regionBody:fe,regionFooter:ue,onClose:me})},e=ae(e),[x,$,ee,m,p,k,d,z,Y,se,fe,ue,s,te,Ee,c,i,n,o,Re,qe,me,Ke,Ye,Xe,h,r,C,b,T,_,v,I,H,A,ne,a,Ge,We,Je]}class vt extends ye{constructor(e){super(),Te(this,e,kt,ht,re,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}const yt=async({fetch:l})=>{const e=await l("/api/admin/backups");if(!e.ok)throw Qe(307,"/");return{backups:(await e.json()).reverse()}},Ut=Object.freeze(Object.defineProperty({__proto__:null,load:yt},Symbol.toStringTag,{value:"Module"}));function Tt(l){let e;return{c(){e=$e("path"),this.h()},l(t){e=et(t,"path",{d:!0}),L(e).forEach(y),this.h()},h(){g(e,"d","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z")},m(t,a){O(t,e,a)},p:ge,d(t){t&&y(e)}}}function Et(l){let e,t;const a=[{viewBox:"0 0 448 512"},l[0]];let o={$$slots:{default:[Tt]},$$scope:{ctx:l}};for(let n=0;n<a.length;n+=1)o=V(o,a[n]);return e=new nt({props:o}),{c(){G(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,[i]){const c=i&1?oe(a,[a[0],_e(n[0])]):{};i&2&&(c.$$scope={dirty:i,ctx:n}),e.$set(c)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ct(l,e,t){return l.$$set=a=>{t(0,e=V(V({},e),ae(a)))},e=ae(e),[e]}class Bt extends ye{constructor(e){super(),Te(this,e,Ct,Et,re,{})}}function je(l,e,t){const a=l.slice();return a[6]=e[t],a[8]=t,a}function Dt(l){let e,t,a="Backups",o,n,i,c,s='<tr><th class="text-center">File Name</th> <th class="text-center">Date</th> <th></th></tr>',f,h,r,m,p,k=Se(l[0].backups),d=[];for(let b=0;b<k.length;b+=1)d[b]=Ue(je(l,k,b));const C=b=>S(d[b],1,1,()=>{d[b]=null});return m=new vt({props:{buttonPositive:"variant-filled-primary"}}),{c(){e=B("div"),t=B("h1"),t.textContent=a,o=F(),n=B("div"),i=B("table"),c=B("thead"),c.innerHTML=s,f=F(),h=B("tbody");for(let b=0;b<d.length;b+=1)d[b].c();r=F(),G(m.$$.fragment),this.h()},l(b){e=D(b,"DIV",{class:!0});var T=L(e);t=D(T,"H1",{class:!0,["data-svelte-h"]:!0}),Ie(t)!=="svelte-98qw5x"&&(t.textContent=a),o=w(T),n=D(T,"DIV",{class:!0});var _=L(n);i=D(_,"TABLE",{class:!0});var v=L(i);c=D(v,"THEAD",{["data-svelte-h"]:!0}),Ie(c)!=="svelte-1ofp2mh"&&(c.innerHTML=s),f=w(v),h=D(v,"TBODY",{});var I=L(h);for(let H=0;H<d.length;H+=1)d[H].l(I);I.forEach(y),v.forEach(y),r=w(_),le(m.$$.fragment,_),_.forEach(y),T.forEach(y),this.h()},h(){g(t,"class","text-4xl py-5 text-primary-500"),g(i,"class","table table-hover"),g(n,"class","table-container"),g(e,"class","flex flex-col justify-center items-center")},m(b,T){O(b,e,T),E(e,t),E(e,o),E(e,n),E(n,i),E(i,c),E(i,f),E(i,h);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(h,null);E(n,r),W(m,n,null),p=!0},p(b,T){if(T&5){k=Se(b[0].backups);let _;for(_=0;_<k.length;_+=1){const v=je(b,k,_);d[_]?(d[_].p(v,T),N(d[_],1)):(d[_]=Ue(v),d[_].c(),N(d[_],1),d[_].m(h,null))}for(Q(),_=k.length;_<d.length;_+=1)C(_);Z()}},i(b){if(!p){for(let T=0;T<k.length;T+=1)N(d[T]);N(m.$$.fragment,b),p=!0}},o(b){d=d.filter(Boolean);for(let T=0;T<d.length;T+=1)S(d[T]);S(m.$$.fragment,b),p=!1},d(b){b&&y(e),tt(d,b),J(m)}}}function Lt(l){let e,t;return e=new ot({}),{c(){G(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,o){W(e,a,o),t=!0},p:ge,i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){S(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Ue(l){let e,t,a=be(l[6].fileName)+"",o,n,i,c=new Date(l[6].dateModified).toLocaleString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"",s,f,h,r,m,p,k,d,C,b;p=new Bt({});function T(){return l[3](l[6])}return{c(){e=B("tr"),t=B("td"),o=R(a),n=F(),i=B("td"),s=R(c),f=F(),h=B("td"),r=B("button"),m=B("p"),G(p.$$.fragment),k=F(),this.h()},l(_){e=D(_,"TR",{class:!0});var v=L(e);t=D(v,"TD",{});var I=L(t);o=q(I,a),I.forEach(y),n=w(v),i=D(v,"TD",{});var H=L(i);s=q(H,c),H.forEach(y),f=w(v),h=D(v,"TD",{});var A=L(h);r=D(A,"BUTTON",{type:!0,class:!0});var z=L(r);m=D(z,"P",{class:!0});var Y=L(m);le(p.$$.fragment,Y),Y.forEach(y),z.forEach(y),A.forEach(y),k=w(v),v.forEach(y),this.h()},h(){g(m,"class","icon svelte-190uef9"),g(r,"type","button"),g(r,"class","btn-icon btn-icon-sm variant-filled-primary"),g(e,"class","text-center")},m(_,v){O(_,e,v),E(e,t),E(t,o),E(e,n),E(e,i),E(i,s),E(e,f),E(e,h),E(h,r),E(r,m),W(p,m,null),E(e,k),d=!0,C||(b=M(r,"click",T),C=!0)},p(_,v){l=_,(!d||v&1)&&a!==(a=be(l[6].fileName)+"")&&K(o,a),(!d||v&1)&&c!==(c=new Date(l[6].dateModified).toLocaleString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"")&&K(s,c)},i(_){d||(N(p.$$.fragment,_),d=!0)},o(_){S(p.$$.fragment,_),d=!1},d(_){_&&y(e),J(p),C=!1,b()}}}function Nt(l){let e,t,a,o;const n=[Lt,Dt],i=[];function c(s,f){return s[1]?0:1}return e=c(l),t=i[e]=n[e](l),{c(){t.c(),a=P()},l(s){t.l(s),a=P()},m(s,f){i[e].m(s,f),O(s,a,f),o=!0},p(s,[f]){let h=e;e=c(s),e===h?i[e].p(s,f):(Q(),S(i[h],1,1,()=>{i[h]=null}),Z(),t=i[e],t?t.p(s,f):(t=i[e]=n[e](s),t.c()),N(t,1),t.m(a.parentNode,a))},i(s){o||(N(t),o=!0)},o(s){S(t),o=!1},d(s){s&&y(a),i[e].d(s)}}}function be(l){return l.substring(7,l.length)}function Ot(l,e,t){let a;Ve(l,U,f=>t(5,a=f));let{data:o}=e,n=!1;const i={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to delete this backup?",meta:{},response:async f=>{if(f)try{t(1,n=!0);const h=be(a[0].meta.fileName);if(!(await fetch(`/api/admin/backups/${h}`,{method:"Delete"})).ok)throw new Error("something went wrong");t(1,n=!1),lt()}catch(h){console.log(h),t(1,n=!1)}}};function c(f){i.meta.fileName=f,U.trigger(i)}const s=f=>c(f.fileName);return l.$$set=f=>{"data"in f&&t(0,o=f.data)},[o,n,c,s]}class Vt extends ye{constructor(e){super(),Te(this,e,Ot,Nt,re,{data:0})}}export{Vt as component,Ut as universal};
