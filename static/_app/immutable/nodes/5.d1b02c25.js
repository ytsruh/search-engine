import{r as Qe}from"../chunks/index.ade5cbd2.js";import{s as re,f as Ve,d as V,e as ae,n as ge,i as Ze,r as pe,j as Be}from"../chunks/utils.50d53bae.js";import{e as P,i as O,r as M,d as y,B as xe,b as B,f as D,g as L,h as g,q as E,C as he,u as De,p as Le,s as w,c as F,H as ve,x as ke,k as R,l as q,D as Ne,E as Oe,m as K,v as $e,y as et,z as Ie,F as tt}from"../chunks/scheduler.9c47e382.js";import{S as ye,i as Te,a as N,g as Q,t as S,c as Z,f as X,b as G,d as le,m as W,e as J}from"../chunks/index.2a1b9d3c.js";import{e as Se}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.81dfeb6a.js";import{i as lt}from"../chunks/navigation.5d608662.js";import{g as oe,a as _e,I as nt}from"../chunks/IconBase.6595628f.js";import{w as at}from"../chunks/index.b0b39f05.js";import{f as ie,a as He}from"../chunks/index.95a1dcea.js";import{L as ot}from"../chunks/Loading.ec51317a.js";function it(){const{subscribe:l,set:e,update:t}=at([]);return{subscribe:l,set:e,update:t,trigger:a=>t(o=>(o.push(a),o)),close:()=>t(a=>(a.length>0&&a.shift(),a)),clear:()=>e([])}}const U=it();function rt(l,e){const t='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';let a,o;function n(r){r.shiftKey&&r.code==="Tab"&&(r.preventDefault(),o.focus())}function i(r){!r.shiftKey&&r.code==="Tab"&&(r.preventDefault(),a.focus())}const c=r=>{if(e===!1)return;const d=Array.from(l.querySelectorAll(t));d.length&&(a=d[0],o=d[d.length-1],r||a.focus(),a.addEventListener("keydown",n),o.addEventListener("keydown",i))};c(!1);function s(){a&&a.removeEventListener("keydown",n),o&&o.removeEventListener("keydown",i)}const f=(r,d)=>(r.length&&(s(),c(!0)),d),h=new MutationObserver(f);return h.observe(l,{childList:!0,subtree:!0}),{update(r){e=r,r?c(!1):s()},destroy(){s(),h.disconnect()}}}function Me(l){let e=l[12],t,a,o=ze(l);return{c(){o.c(),t=P()},l(n){o.l(n),t=P()},m(n,i){o.m(n,i),O(n,t,i),a=!0},p(n,i){i[0]&4096&&re(e,e=n[12])?(Q(),S(o,1,1,ge),Z(),o=ze(n),o.c(),N(o,1),o.m(t.parentNode,t)):o.p(n,i)},i(n){a||(N(o),a=!0)},o(n){S(o),a=!1},d(n){n&&y(t),o.d(n)}}}function st(l){var f,h;let e,t,a,o,n;const i=[(f=l[14])==null?void 0:f.props,{parent:l[15]}];var c=(h=l[14])==null?void 0:h.ref;function s(r,d){var v;let p={$$slots:{default:[ut]},$$scope:{ctx:r}};if(d!==void 0&&d[0]&49152)p=oe(i,[d[0]&16384&&_e((v=r[14])==null?void 0:v.props),d[0]&32768&&{parent:r[15]}]);else for(let m=0;m<i.length;m+=1)p=V(p,i[m]);return{props:p}}return c&&(t=Le(c,s(l))),{c(){e=B("div"),t&&G(t.$$.fragment),this.h()},l(r){e=D(r,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var d=L(e);t&&le(t.$$.fragment,d),d.forEach(y),this.h()},h(){var r;g(e,"class",a="modal contents "+(((r=l[12][0])==null?void 0:r.modalClasses)??"")),g(e,"data-testid","modal-component"),g(e,"role","dialog"),g(e,"aria-modal","true"),g(e,"aria-label",o=l[12][0].title??"")},m(r,d){O(r,e,d),t&&W(t,e,null),n=!0},p(r,d){var p,v,m;if(d[0]&16384&&c!==(c=(p=r[14])==null?void 0:p.ref)){if(t){Q();const C=t;S(C.$$.fragment,1,0,()=>{J(C,1)}),Z()}c?(t=Le(c,s(r,d)),G(t.$$.fragment),N(t.$$.fragment,1),W(t,e,null)):t=null}else if(c){const C=d[0]&49152?oe(i,[d[0]&16384&&_e((v=r[14])==null?void 0:v.props),d[0]&32768&&{parent:r[15]}]):{};d[0]&16384|d[1]&8192&&(C.$$scope={dirty:d,ctx:r}),t.$set(C)}(!n||d[0]&4096&&a!==(a="modal contents "+(((m=r[12][0])==null?void 0:m.modalClasses)??"")))&&g(e,"class",a),(!n||d[0]&4096&&o!==(o=r[12][0].title??""))&&g(e,"aria-label",o)},i(r){n||(t&&N(t.$$.fragment,r),n=!0)},o(r){t&&S(t.$$.fragment,r),n=!1},d(r){r&&y(e),t&&J(t)}}}function ft(l){var m,C,_,T;let e,t,a,o,n,i,c,s,f=((m=l[12][0])==null?void 0:m.title)&&Fe(l),h=((C=l[12][0])==null?void 0:C.body)&&Pe(l),r=((_=l[12][0])==null?void 0:_.image)&&typeof((T=l[12][0])==null?void 0:T.image)=="string"&&Ae(l);function d(b,k){if(b[12][0].type==="alert")return mt;if(b[12][0].type==="confirm")return dt;if(b[12][0].type==="prompt")return ct}let p=d(l),v=p&&p(l);return{c(){e=B("div"),f&&f.c(),t=w(),h&&h.c(),a=w(),r&&r.c(),o=w(),v&&v.c(),this.h()},l(b){e=D(b,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var k=L(e);f&&f.l(k),t=F(k),h&&h.l(k),a=F(k),r&&r.l(k),o=F(k),v&&v.l(k),k.forEach(y),this.h()},h(){g(e,"class",n="modal "+l[16]),g(e,"data-testid","modal"),g(e,"role","dialog"),g(e,"aria-modal","true"),g(e,"aria-label",i=l[12][0].title??"")},m(b,k){O(b,e,k),f&&f.m(e,null),E(e,t),h&&h.m(e,null),E(e,a),r&&r.m(e,null),E(e,o),v&&v.m(e,null),s=!0},p(b,k){var I,H,A,z;l=b,(I=l[12][0])!=null&&I.title?f?f.p(l,k):(f=Fe(l),f.c(),f.m(e,t)):f&&(f.d(1),f=null),(H=l[12][0])!=null&&H.body?h?h.p(l,k):(h=Pe(l),h.c(),h.m(e,a)):h&&(h.d(1),h=null),(A=l[12][0])!=null&&A.image&&typeof((z=l[12][0])==null?void 0:z.image)=="string"?r?r.p(l,k):(r=Ae(l),r.c(),r.m(e,o)):r&&(r.d(1),r=null),p===(p=d(l))&&v?v.p(l,k):(v&&v.d(1),v=p&&p(l),v&&(v.c(),v.m(e,null))),(!s||k[0]&65536&&n!==(n="modal "+l[16]))&&g(e,"class",n),(!s||k[0]&4096&&i!==(i=l[12][0].title??""))&&g(e,"aria-label",i)},i(b){s||(he(()=>{s&&(c||(c=X(e,ie,{duration:l[3],opacity:0,y:100},!0)),c.run(1))}),s=!0)},o(b){c||(c=X(e,ie,{duration:l[3],opacity:0,y:100},!1)),c.run(0),s=!1},d(b){b&&y(e),f&&f.d(),h&&h.d(),r&&r.d(),v&&v.d(),b&&c&&c.end()}}}function we(l){var o;let e,t=((o=l[14])==null?void 0:o.slot)+"",a;return{c(){e=new ve(!1),a=P(),this.h()},l(n){e=ke(n,!1),a=P(),this.h()},h(){e.a=a},m(n,i){e.m(t,n,i),O(n,a,i)},p(n,i){var c;i[0]&16384&&t!==(t=((c=n[14])==null?void 0:c.slot)+"")&&e.p(t)},d(n){n&&(y(a),e.d())}}}function ut(l){var a;let e,t=((a=l[14])==null?void 0:a.slot)&&we(l);return{c(){t&&t.c(),e=P()},l(o){t&&t.l(o),e=P()},m(o,n){t&&t.m(o,n),O(o,e,n)},p(o,n){var i;(i=o[14])!=null&&i.slot?t?t.p(o,n):(t=we(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){o&&y(e),t&&t.d(o)}}}function Fe(l){let e,t,a=l[12][0].title+"",o;return{c(){e=B("header"),t=new ve(!1),this.h()},l(n){e=D(n,"HEADER",{class:!0});var i=L(e);t=ke(i,!1),i.forEach(y),this.h()},h(){t.a=null,g(e,"class",o="modal-header "+l[9])},m(n,i){O(n,e,i),t.m(a,e)},p(n,i){i[0]&4096&&a!==(a=n[12][0].title+"")&&t.p(a),i[0]&512&&o!==(o="modal-header "+n[9])&&g(e,"class",o)},d(n){n&&y(e)}}}function Pe(l){let e,t,a=l[12][0].body+"",o;return{c(){e=B("article"),t=new ve(!1),this.h()},l(n){e=D(n,"ARTICLE",{class:!0});var i=L(e);t=ke(i,!1),i.forEach(y),this.h()},h(){t.a=null,g(e,"class",o="modal-body "+l[10])},m(n,i){O(n,e,i),t.m(a,e)},p(n,i){i[0]&4096&&a!==(a=n[12][0].body+"")&&t.p(a),i[0]&1024&&o!==(o="modal-body "+n[10])&&g(e,"class",o)},d(n){n&&y(e)}}}function Ae(l){let e,t;return{c(){e=B("img"),this.h()},l(a){e=D(a,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var a;g(e,"class","modal-image "+pt),Be(e.src,t=(a=l[12][0])==null?void 0:a.image)||g(e,"src",t),g(e,"alt","Modal")},m(a,o){O(a,e,o)},p(a,o){var n;o[0]&4096&&!Be(e.src,t=(n=a[12][0])==null?void 0:n.image)&&g(e,"src",t)},d(a){a&&y(e)}}}function ct(l){let e,t,a,o,n,i,c,s,f,h,r,d,p,v,m=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},l[12][0].valueAttr],C={};for(let _=0;_<m.length;_+=1)C=V(C,m[_]);return{c(){e=B("form"),t=B("input"),a=w(),o=B("footer"),n=B("button"),i=R(l[0]),s=w(),f=B("button"),h=R(l[2]),this.h()},l(_){e=D(_,"FORM",{class:!0});var T=L(e);t=D(T,"INPUT",{class:!0,name:!0,type:!0}),a=F(T),o=D(T,"FOOTER",{class:!0});var b=L(o);n=D(b,"BUTTON",{type:!0,class:!0});var k=L(n);i=q(k,l[0]),k.forEach(y),s=F(b),f=D(b,"BUTTON",{type:!0,class:!0});var I=L(f);h=q(I,l[2]),I.forEach(y),b.forEach(y),T.forEach(y),this.h()},h(){Ne(t,C),g(n,"type","button"),g(n,"class",c="btn "+l[7]),g(f,"type","submit"),g(f,"class",r="btn "+l[8]),g(o,"class",d="modal-footer "+l[11]),g(e,"class","space-y-4")},m(_,T){O(_,e,T),E(e,t),t.autofocus&&t.focus(),Oe(t,l[13]),E(e,a),E(e,o),E(o,n),E(n,i),E(o,s),E(o,f),E(f,h),p||(v=[M(t,"input",l[39]),M(n,"click",l[21]),M(e,"submit",l[23])],p=!0)},p(_,T){Ne(t,C=oe(m,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},T[0]&4096&&_[12][0].valueAttr])),T[0]&8192&&t.value!==_[13]&&Oe(t,_[13]),T[0]&1&&K(i,_[0]),T[0]&128&&c!==(c="btn "+_[7])&&g(n,"class",c),T[0]&4&&K(h,_[2]),T[0]&256&&r!==(r="btn "+_[8])&&g(f,"class",r),T[0]&2048&&d!==(d="modal-footer "+_[11])&&g(o,"class",d)},d(_){_&&y(e),p=!1,pe(v)}}}function dt(l){let e,t,a,o,n,i,c,s,f,h,r;return{c(){e=B("footer"),t=B("button"),a=R(l[0]),n=w(),i=B("button"),c=R(l[1]),this.h()},l(d){e=D(d,"FOOTER",{class:!0});var p=L(e);t=D(p,"BUTTON",{type:!0,class:!0});var v=L(t);a=q(v,l[0]),v.forEach(y),n=F(p),i=D(p,"BUTTON",{type:!0,class:!0});var m=L(i);c=q(m,l[1]),m.forEach(y),p.forEach(y),this.h()},h(){g(t,"type","button"),g(t,"class",o="btn "+l[7]),g(i,"type","button"),g(i,"class",s="btn "+l[8]),g(e,"class",f="modal-footer "+l[11])},m(d,p){O(d,e,p),E(e,t),E(t,a),E(e,n),E(e,i),E(i,c),h||(r=[M(t,"click",l[21]),M(i,"click",l[22])],h=!0)},p(d,p){p[0]&1&&K(a,d[0]),p[0]&128&&o!==(o="btn "+d[7])&&g(t,"class",o),p[0]&2&&K(c,d[1]),p[0]&256&&s!==(s="btn "+d[8])&&g(i,"class",s),p[0]&2048&&f!==(f="modal-footer "+d[11])&&g(e,"class",f)},d(d){d&&y(e),h=!1,pe(r)}}}function mt(l){let e,t,a,o,n,i,c;return{c(){e=B("footer"),t=B("button"),a=R(l[0]),this.h()},l(s){e=D(s,"FOOTER",{class:!0});var f=L(e);t=D(f,"BUTTON",{type:!0,class:!0});var h=L(t);a=q(h,l[0]),h.forEach(y),f.forEach(y),this.h()},h(){g(t,"type","button"),g(t,"class",o="btn "+l[7]),g(e,"class",n="modal-footer "+l[11])},m(s,f){O(s,e,f),E(e,t),E(t,a),i||(c=M(t,"click",l[21]),i=!0)},p(s,f){f[0]&1&&K(a,s[0]),f[0]&128&&o!==(o="btn "+s[7])&&g(t,"class",o),f[0]&2048&&n!==(n="modal-footer "+s[11])&&g(e,"class",n)},d(s){s&&y(e),i=!1,c()}}}function ze(l){let e,t,a,o,n,i,c,s,f,h,r;const d=[ft,st],p=[];function v(m,C){return m[12][0].type!=="component"?0:1}return a=v(l),o=p[a]=d[a](l),{c(){e=B("div"),t=B("div"),o.c(),this.h()},l(m){e=D(m,"DIV",{class:!0,"data-testid":!0});var C=L(e);t=D(C,"DIV",{class:!0});var _=L(t);o.l(_),_.forEach(y),C.forEach(y),this.h()},h(){g(t,"class",n="modal-transition "+l[17]),g(e,"class",c="modal-backdrop "+l[18]),g(e,"data-testid","modal-backdrop")},m(m,C){O(m,e,C),E(e,t),p[a].m(t,null),f=!0,h||(r=[M(e,"mousedown",l[19]),M(e,"mouseup",l[20]),M(e,"touchstart",l[37],{passive:!0}),M(e,"touchend",l[38],{passive:!0}),Ze(rt.call(null,e,!0))],h=!0)},p(m,C){l=m;let _=a;a=v(l),a===_?p[a].p(l,C):(Q(),S(p[_],1,1,()=>{p[_]=null}),Z(),o=p[a],o?o.p(l,C):(o=p[a]=d[a](l),o.c()),N(o,1),o.m(t,null)),(!f||C[0]&131072&&n!==(n="modal-transition "+l[17]))&&g(t,"class",n),(!f||C[0]&262144&&c!==(c="modal-backdrop "+l[18]))&&g(e,"class",c)},i(m){f||(N(o),he(()=>{f&&(i||(i=X(t,ie,{duration:l[3],opacity:l[4],x:l[5],y:l[6]},!0)),i.run(1))}),he(()=>{f&&(s||(s=X(e,He,{duration:l[3]},!0)),s.run(1))}),f=!0)},o(m){S(o),i||(i=X(t,ie,{duration:l[3],opacity:l[4],x:l[5],y:l[6]},!1)),i.run(0),s||(s=X(e,He,{duration:l[3]},!1)),s.run(0),f=!1},d(m){m&&y(e),p[a].d(),m&&i&&i.end(),m&&s&&s.end(),h=!1,pe(r)}}}function ht(l){let e,t,a,o,n=l[12].length>0&&Me(l);return{c(){n&&n.c(),e=P()},l(i){n&&n.l(i),e=P()},m(i,c){n&&n.m(i,c),O(i,e,c),t=!0,a||(o=M(window,"keydown",l[24]),a=!0)},p(i,c){i[12].length>0?n?(n.p(i,c),c[0]&4096&&N(n,1)):(n=Me(i),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Q(),S(n,1,1,()=>{n=null}),Z())},i(i){t||(N(n),t=!0)},o(i){S(n),t=!1},d(i){i&&y(e),n&&n.d(i),a=!1,o()}}}const _t="fixed top-0 left-0 right-0 bottom-0 overflow-y-auto",bt="w-full h-fit min-h-full p-4 overflow-y-auto flex justify-center",gt="block overflow-y-auto",pt="w-full h-auto";function vt(l,e,t){let a,o,n,i,c,s;Ve(l,U,u=>t(12,s=u));const f=xe();let{position:h="items-center"}=e,{components:r={}}=e,{duration:d=150}=e,{flyOpacity:p=0}=e,{flyX:v=0}=e,{flyY:m=100}=e,{background:C="bg-surface-100-800-token"}=e,{width:_="w-modal"}=e,{height:T="h-auto"}=e,{padding:b="p-4"}=e,{spacing:k="space-y-4"}=e,{rounded:I="rounded-container-token"}=e,{shadow:H="shadow-xl"}=e,{zIndex:A="z-[999]"}=e,{buttonNeutral:z="variant-ghost-surface"}=e,{buttonPositive:Y="variant-filled"}=e,{buttonTextCancel:x="Cancel"}=e,{buttonTextConfirm:$="Confirm"}=e,{buttonTextSubmit:ee="Submit"}=e,{regionBackdrop:ne="bg-surface-backdrop-token"}=e,{regionHeader:se="text-2xl font-bold"}=e,{regionBody:fe="max-h-[200px] overflow-hidden"}=e,{regionFooter:ue="flex justify-end space-x-2"}=e,te;const ce={buttonTextCancel:x,buttonTextConfirm:$,buttonTextSubmit:ee};let Ee,de=!1;U.subscribe(u=>{u.length&&(u[0].type==="prompt"&&t(13,te=u[0].value),t(0,x=u[0].buttonTextCancel||ce.buttonTextCancel),t(1,$=u[0].buttonTextConfirm||ce.buttonTextConfirm),t(2,ee=u[0].buttonTextSubmit||ce.buttonTextSubmit),t(14,Ee=typeof u[0].component=="string"?r[u[0].component]:u[0].component))});function Re(u){if(!(u.target instanceof Element))return;const j=u.target.classList;(j.contains("modal-backdrop")||j.contains("modal-transition"))&&(de=!0)}function qe(u){if(!(u.target instanceof Element))return;const j=u.target.classList;(j.contains("modal-backdrop")||j.contains("modal-transition"))&&de&&(s[0].response&&s[0].response(void 0),U.close(),f("backdrop",u)),de=!1}function me(){s[0].response&&s[0].response(!1),U.close()}function Ke(){s[0].response&&s[0].response(!0),U.close()}function Ye(u){u.preventDefault(),s[0].response&&s[0].response(te),U.close()}function Xe(u){s.length&&u.code==="Escape"&&me()}function Ge(u){De.call(this,l,u)}function We(u){De.call(this,l,u)}function Je(){te=this.value,t(13,te)}return l.$$set=u=>{t(43,e=V(V({},e),ae(u))),"position"in u&&t(25,h=u.position),"components"in u&&t(26,r=u.components),"duration"in u&&t(3,d=u.duration),"flyOpacity"in u&&t(4,p=u.flyOpacity),"flyX"in u&&t(5,v=u.flyX),"flyY"in u&&t(6,m=u.flyY),"background"in u&&t(27,C=u.background),"width"in u&&t(28,_=u.width),"height"in u&&t(29,T=u.height),"padding"in u&&t(30,b=u.padding),"spacing"in u&&t(31,k=u.spacing),"rounded"in u&&t(32,I=u.rounded),"shadow"in u&&t(33,H=u.shadow),"zIndex"in u&&t(34,A=u.zIndex),"buttonNeutral"in u&&t(7,z=u.buttonNeutral),"buttonPositive"in u&&t(8,Y=u.buttonPositive),"buttonTextCancel"in u&&t(0,x=u.buttonTextCancel),"buttonTextConfirm"in u&&t(1,$=u.buttonTextConfirm),"buttonTextSubmit"in u&&t(2,ee=u.buttonTextSubmit),"regionBackdrop"in u&&t(35,ne=u.regionBackdrop),"regionHeader"in u&&t(9,se=u.regionHeader),"regionBody"in u&&t(10,fe=u.regionBody),"regionFooter"in u&&t(11,ue=u.regionFooter)},l.$$.update=()=>{var u,j,Ce;l.$$.dirty[0]&33558528&&t(36,a=((u=s[0])==null?void 0:u.position)??h),t(18,o=`${_t} ${ne} ${A} ${e.class??""} ${((j=s[0])==null?void 0:j.backdropClasses)??""}`),l.$$.dirty[1]&32&&t(17,n=`${bt} ${a??""}`),l.$$.dirty[0]&2013270016|l.$$.dirty[1]&7&&t(16,i=`${gt} ${C} ${_} ${T} ${b} ${k} ${I} ${H} ${((Ce=s[0])==null?void 0:Ce.modalClasses)??""}`),l.$$.dirty[0]&2046824447|l.$$.dirty[1]&23&&t(15,c={position:h,duration:d,flyOpacity:p,flyX:v,flyY:m,background:C,width:_,height:T,padding:b,spacing:k,rounded:I,shadow:H,buttonNeutral:z,buttonPositive:Y,buttonTextCancel:x,buttonTextConfirm:$,buttonTextSubmit:ee,regionBackdrop:ne,regionHeader:se,regionBody:fe,regionFooter:ue,onClose:me})},e=ae(e),[x,$,ee,d,p,v,m,z,Y,se,fe,ue,s,te,Ee,c,i,n,o,Re,qe,me,Ke,Ye,Xe,h,r,C,_,T,b,k,I,H,A,ne,a,Ge,We,Je]}class kt extends ye{constructor(e){super(),Te(this,e,vt,ht,re,{position:25,components:26,duration:3,flyOpacity:4,flyX:5,flyY:6,background:27,width:28,height:29,padding:30,spacing:31,rounded:32,shadow:33,zIndex:34,buttonNeutral:7,buttonPositive:8,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:35,regionHeader:9,regionBody:10,regionFooter:11},null,[-1,-1])}}const yt=async({fetch:l})=>{const e=await l("/api/admin/backups");if(!e.ok)throw Qe(307,"/");return{backups:(await e.json()).reverse()}},Ut=Object.freeze(Object.defineProperty({__proto__:null,load:yt},Symbol.toStringTag,{value:"Module"}));function Tt(l){let e;return{c(){e=$e("path"),this.h()},l(t){e=et(t,"path",{d:!0}),L(e).forEach(y),this.h()},h(){g(e,"d","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z")},m(t,a){O(t,e,a)},p:ge,d(t){t&&y(e)}}}function Et(l){let e,t;const a=[{viewBox:"0 0 448 512"},l[0]];let o={$$slots:{default:[Tt]},$$scope:{ctx:l}};for(let n=0;n<a.length;n+=1)o=V(o,a[n]);return e=new nt({props:o}),{c(){G(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,i){W(e,n,i),t=!0},p(n,[i]){const c=i&1?oe(a,[a[0],_e(n[0])]):{};i&2&&(c.$$scope={dirty:i,ctx:n}),e.$set(c)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ct(l,e,t){return l.$$set=a=>{t(0,e=V(V({},e),ae(a)))},e=ae(e),[e]}class Bt extends ye{constructor(e){super(),Te(this,e,Ct,Et,re,{})}}function je(l,e,t){const a=l.slice();return a[6]=e[t],a[8]=t,a}function Dt(l){let e,t,a="Backups",o,n,i,c,s='<tr><th class="text-center">File Name</th> <th class="text-center">Date</th> <th></th></tr>',f,h,r,d,p,v=Se(l[0].backups),m=[];for(let _=0;_<v.length;_+=1)m[_]=Ue(je(l,v,_));const C=_=>S(m[_],1,1,()=>{m[_]=null});return d=new kt({props:{buttonPositive:"variant-filled-primary"}}),{c(){e=B("div"),t=B("h1"),t.textContent=a,o=w(),n=B("div"),i=B("table"),c=B("thead"),c.innerHTML=s,f=w(),h=B("tbody");for(let _=0;_<m.length;_+=1)m[_].c();r=w(),G(d.$$.fragment),this.h()},l(_){e=D(_,"DIV",{class:!0});var T=L(e);t=D(T,"H1",{class:!0,"data-svelte-h":!0}),Ie(t)!=="svelte-98qw5x"&&(t.textContent=a),o=F(T),n=D(T,"DIV",{class:!0});var b=L(n);i=D(b,"TABLE",{class:!0});var k=L(i);c=D(k,"THEAD",{"data-svelte-h":!0}),Ie(c)!=="svelte-1ofp2mh"&&(c.innerHTML=s),f=F(k),h=D(k,"TBODY",{});var I=L(h);for(let H=0;H<m.length;H+=1)m[H].l(I);I.forEach(y),k.forEach(y),r=F(b),le(d.$$.fragment,b),b.forEach(y),T.forEach(y),this.h()},h(){g(t,"class","text-4xl py-5 text-primary-500"),g(i,"class","table table-hover"),g(n,"class","table-container"),g(e,"class","flex flex-col justify-center items-center")},m(_,T){O(_,e,T),E(e,t),E(e,o),E(e,n),E(n,i),E(i,c),E(i,f),E(i,h);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(h,null);E(n,r),W(d,n,null),p=!0},p(_,T){if(T&5){v=Se(_[0].backups);let b;for(b=0;b<v.length;b+=1){const k=je(_,v,b);m[b]?(m[b].p(k,T),N(m[b],1)):(m[b]=Ue(k),m[b].c(),N(m[b],1),m[b].m(h,null))}for(Q(),b=v.length;b<m.length;b+=1)C(b);Z()}},i(_){if(!p){for(let T=0;T<v.length;T+=1)N(m[T]);N(d.$$.fragment,_),p=!0}},o(_){m=m.filter(Boolean);for(let T=0;T<m.length;T+=1)S(m[T]);S(d.$$.fragment,_),p=!1},d(_){_&&y(e),tt(m,_),J(d)}}}function Lt(l){let e,t;return e=new ot({}),{c(){G(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,o){W(e,a,o),t=!0},p:ge,i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){S(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Ue(l){let e,t,a=be(l[6].fileName)+"",o,n,i,c=new Date(l[6].dateModified).toLocaleString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"",s,f,h,r,d,p,v,m,C,_;p=new Bt({});function T(){return l[3](l[6])}return{c(){e=B("tr"),t=B("td"),o=R(a),n=w(),i=B("td"),s=R(c),f=w(),h=B("td"),r=B("button"),d=B("p"),G(p.$$.fragment),v=w(),this.h()},l(b){e=D(b,"TR",{class:!0});var k=L(e);t=D(k,"TD",{});var I=L(t);o=q(I,a),I.forEach(y),n=F(k),i=D(k,"TD",{});var H=L(i);s=q(H,c),H.forEach(y),f=F(k),h=D(k,"TD",{});var A=L(h);r=D(A,"BUTTON",{type:!0,class:!0});var z=L(r);d=D(z,"P",{class:!0});var Y=L(d);le(p.$$.fragment,Y),Y.forEach(y),z.forEach(y),A.forEach(y),v=F(k),k.forEach(y),this.h()},h(){g(d,"class","icon svelte-190uef9"),g(r,"type","button"),g(r,"class","btn-icon btn-icon-sm variant-filled-primary"),g(e,"class","text-center")},m(b,k){O(b,e,k),E(e,t),E(t,o),E(e,n),E(e,i),E(i,s),E(e,f),E(e,h),E(h,r),E(r,d),W(p,d,null),E(e,v),m=!0,C||(_=M(r,"click",T),C=!0)},p(b,k){l=b,(!m||k&1)&&a!==(a=be(l[6].fileName)+"")&&K(o,a),(!m||k&1)&&c!==(c=new Date(l[6].dateModified).toLocaleString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})+"")&&K(s,c)},i(b){m||(N(p.$$.fragment,b),m=!0)},o(b){S(p.$$.fragment,b),m=!1},d(b){b&&y(e),J(p),C=!1,_()}}}function Nt(l){let e,t,a,o;const n=[Lt,Dt],i=[];function c(s,f){return s[1]?0:1}return e=c(l),t=i[e]=n[e](l),{c(){t.c(),a=P()},l(s){t.l(s),a=P()},m(s,f){i[e].m(s,f),O(s,a,f),o=!0},p(s,[f]){let h=e;e=c(s),e===h?i[e].p(s,f):(Q(),S(i[h],1,1,()=>{i[h]=null}),Z(),t=i[e],t?t.p(s,f):(t=i[e]=n[e](s),t.c()),N(t,1),t.m(a.parentNode,a))},i(s){o||(N(t),o=!0)},o(s){S(t),o=!1},d(s){s&&y(a),i[e].d(s)}}}function be(l){return l.substring(7,l.length)}function Ot(l,e,t){let a;Ve(l,U,f=>t(5,a=f));let{data:o}=e,n=!1;const i={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to delete this backup?",meta:{},response:async f=>{if(f)try{t(1,n=!0);const h=be(a[0].meta.fileName);if(!(await fetch(`/api/admin/backups/${h}`,{method:"Delete"})).ok)throw new Error("something went wrong");t(1,n=!1),lt()}catch(h){console.log(h),t(1,n=!1)}}};function c(f){i.meta.fileName=f,U.trigger(i)}const s=f=>c(f.fileName);return l.$$set=f=>{"data"in f&&t(0,o=f.data)},[o,n,c,s]}class Vt extends ye{constructor(e){super(),Te(this,e,Ot,Nt,re,{data:0})}}export{Vt as component,Ut as universal};
