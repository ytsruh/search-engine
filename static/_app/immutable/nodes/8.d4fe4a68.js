import{s as P,n as E}from"../chunks/utils.50d53bae.js";import{b as _,s as w,e as x,w as A,f as b,d,c as k,h as g,q as h,i as $,g as C,z as L,r as q,A as I}from"../chunks/scheduler.9c47e382.js";import{S as N,i as O,t as y,c as z,a as v,g as D,b as j,d as M,m as S,e as H}from"../chunks/index.2a1b9d3c.js";import{g as F}from"../chunks/navigation.96bc44bb.js";import{t as T,T as J}from"../chunks/Toast.e5c9135c.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.81dfeb6a.js";import{L as R}from"../chunks/Loading.ec51317a.js";import{i as V}from"../chunks/authStore.a8bdaebf.js";function B(f){let t,s,e='<span class="text-primary-600">Login</span> to Search Engine Admin',n,r,u='<label class="label py-2"><span>Email</span> <input class="input" id="email" type="email" placeholder="Email Address"/></label> <label class="label py-2"><span>Password</span> <input class="input" id="password" type="password" placeholder="Password"/></label> <div class="flex justify-around py-5"><button type="submit" class="btn variant-filled-primary">Login</button></div>',m,o,c,a,l;return o=new J({}),{c(){t=_("div"),s=_("h1"),s.innerHTML=e,n=w(),r=_("form"),r.innerHTML=u,m=w(),j(o.$$.fragment),this.h()},l(i){t=b(i,"DIV",{class:!0});var p=C(t);s=b(p,"H1",{class:!0,["data-svelte-h"]:!0}),L(s)!=="svelte-klfeco"&&(s.innerHTML=e),n=k(p),r=b(p,"FORM",{class:!0,autocomplete:!0,["data-svelte-h"]:!0}),L(r)!=="svelte-mh7lht"&&(r.innerHTML=u),m=k(p),M(o.$$.fragment,p),p.forEach(d),this.h()},h(){g(s,"class","text-3xl py-5"),g(r,"class","w-full sm:w-2/3 lg:w-1/2 xl:w-1/3"),g(r,"autocomplete","off"),g(t,"class","flex flex-col h-full items-center justify-center px-10")},m(i,p){$(i,t,p),h(t,s),h(t,n),h(t,r),h(t,m),S(o,t,null),c=!0,a||(l=q(r,"submit",I(f[1])),a=!0)},p:E,i(i){c||(v(o.$$.fragment,i),c=!0)},o(i){y(o.$$.fragment,i),c=!1},d(i){i&&d(t),H(o),a=!1,l()}}}function G(f){let t,s;return t=new R({}),{c(){j(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,n){S(t,e,n),s=!0},p:E,i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){y(t.$$.fragment,e),s=!1},d(e){H(t,e)}}}function K(f){let t,s,e,n,r,u;const m=[G,B],o=[];function c(a,l){return a[0]?0:1}return e=c(f),n=o[e]=m[e](f),{c(){t=_("meta"),s=w(),n.c(),r=x(),this.h()},l(a){const l=A("svelte-1rjgk8j",document.head);t=b(l,"META",{name:!0,content:!0}),l.forEach(d),s=k(a),n.l(a),r=x(),this.h()},h(){document.title="Login | Search Engine",g(t,"name","description"),g(t,"content","Login to the admin section of the search engine")},m(a,l){h(document.head,t),$(a,s,l),o[e].m(a,l),$(a,r,l),u=!0},p(a,[l]){let i=e;e=c(a),e===i?o[e].p(a,l):(D(),y(o[i],1,1,()=>{o[i]=null}),z(),n=o[e],n?n.p(a,l):(n=o[e]=m[e](a),n.c()),v(n,1),n.m(r.parentNode,r))},i(a){u||(v(n),u=!0)},o(a){y(n),u=!1},d(a){a&&(d(s),d(r)),d(t),o[e].d(a)}}}function Q(f,t,s){let e=!1;async function n(r){s(0,e=!0);const u=r.target.email.value,m=r.target.password.value;if(u==""||m==""){const c={message:"Please ensure you enter your username & password",timeout:5e3,background:"variant-filled-primary"};s(0,e=!1),T.trigger(c);return}const o=await fetch("/api/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:m})});if(!o.ok){const c={message:"There was a problem logging you in. Please ensure your details are correct.",timeout:5e3,background:"variant-filled-primary"};s(0,e=!1),T.trigger(c);return}await o.json(),s(0,e=!1),V.set(!0),F("/admin")}return[e,n]}class ae extends N{constructor(t){super(),O(this,t,Q,K,P,{})}}export{ae as component};
