import{a as b,t as x}from"./index.2a1b9d3c.js";import{r as z,o as H}from"./utils.50d53bae.js";import{w as V}from"./index.b0b39f05.js";function k(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function j(e,o){x(e,1,1,()=>{o.delete(e.key)})}function q(e,o){e.f(),j(e,o)}function F(e,o,t,f,w,u,r,g,h,d,l,S){let n=e.length,m=u.length,i=n;const P={};for(;i--;)P[e[i].key]=i;const _=[],p=new Map,v=new Map,C=[];for(i=m;i--;){const s=S(w,u,i),a=t(s);let c=r.get(a);c?f&&C.push(()=>c.p(s,o)):(c=d(a,s),c.c()),p.set(a,_[i]=c),a in P&&v.set(a,Math.abs(i-P[a]))}const E=new Set,I=new Set;function L(s){b(s,1),s.m(g,l),r.set(s.key,s),l=s.first,m--}for(;n&&m;){const s=_[m-1],a=e[n-1],c=s.key,M=a.key;s===a?(l=s.first,n--,m--):p.has(M)?!r.has(c)||E.has(c)?L(s):I.has(M)?n--:v.get(c)>v.get(M)?(I.add(c),L(s)):(E.add(M),n--):(h(a,r),n--)}for(;n--;){const s=e[n];p.has(s.key)||h(s,r)}for(;m;)L(_[m-1]);return z(C),_}const U={};function O(e){return e==="local"?localStorage:sessionStorage}function y(e,o,t){const f=(t==null?void 0:t.serializer)??JSON,w=(t==null?void 0:t.storage)??"local";function u(r,g){O(w).setItem(r,f.stringify(g))}if(!U[e]){const r=V(o,d=>{const l=O(w).getItem(e);l&&d(f.parse(l));{const S=n=>{n.key===e&&d(n.newValue?f.parse(n.newValue):null)};return window.addEventListener("storage",S),()=>window.removeEventListener("storage",S)}}),{subscribe:g,set:h}=r;U[e]={set(d){u(e,d),h(d)},update(d){const l=d(H(r));u(e,l),h(l)},subscribe:g}}return U[e]}const A=y("modeOsPrefers",!1),B=y("modeUserPrefers",void 0),D=y("modeCurrent",!1);function G(){const e=window.matchMedia("(prefers-color-scheme: light)").matches;return A.set(e),e}function K(e){B.set(e)}function Q(e){const o=document.documentElement.classList,t="dark";e===!0?o.remove(t):o.add(t),D.set(e)}function R(){const e=document.documentElement.classList,o=localStorage.getItem("modeUserPrefers")==="false",t=!("modeUserPrefers"in localStorage),f=window.matchMedia("(prefers-color-scheme: dark)").matches;o||t&&f?e.add("dark"):e.remove("dark")}export{Q as a,K as b,k as e,q as f,G as g,D as m,R as s,F as u};
